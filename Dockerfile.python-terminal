# Ultra-lightweight Python image for cost optimization
FROM python:3.11-alpine

# Install minimal system dependencies (Alpine = smaller)
RUN apk add --no-cache \
    bash \
    curl \
    git \
    nano

# Install only essential Python packages
RUN pip install --no-cache-dir \
    requests \
    numpy

# Create workspace directory with proper permissions
RUN mkdir -p /workspace && \
    adduser -D -s /bin/bash pythonuser && \
    chown -R pythonuser:pythonuser /workspace

USER pythonuser
WORKDIR /workspace

# Minimal shell setup
RUN echo 'export PS1="🐍 \w $ "' >> ~/.bashrc && \
    echo 'alias ll="ls -la"' >> ~/.bashrc && \
    echo 'alias python="python3"' >> ~/.bashrc

CMD ["/bin/bash"]
